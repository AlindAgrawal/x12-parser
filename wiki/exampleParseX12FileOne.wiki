Example showing X12 Parser reading a X12 file and looping over the segments.

= Introduction =

Example of parsing a X12 file (with loop identification).

= Details =

There are two steps
  # Load/Create the X12 configuration object (based on the X12 transaction) to be parsed.
  # Parse the X12 file.

=== Load/Create a configuration object ===

This is the loop hierarchy of a 835 transaction used here.
  
{{{
 +--X12
 |  +--ISA - ISA
 |  |  +--GS - GS
 |  |  |  +--ST - ST - 835, - 1
 |  |  |  |  +--1000A - N1 - PR, - 1
 |  |  |  |  +--1000B - N1 - PE, - 1
 |  |  |  |  +--2000 - LX
 |  |  |  |  |  +--2100 - CLP
 |  |  |  |  |  |  +--2110 - SVC
 |  |  |  +--SE - SE
 |  |  +--GE - GE
 |  +--IEA - IEA
}}}

Example of how to create a configuration object for the above hierarchy.

{{{ 
private static Cf loadCf() {
        Cf cfX12 = new Cf("X12");

        Cf cfISA = cfX12.addChild("ISA", "ISA");
        Cf cfGS = cfISA.addChild("GS", "GS");
        Cf cfST = cfGS.addChild("ST", "ST", "835", 1);

        cfST.addChild("1000A", "N1", "PR", 1);
        cfST.addChild("1000B", "N1", "PE", 1);

        Cf cf2000 = cfST.addChild("2000", "LX");

        Cf cf2100 = cf2000.addChild("2100", "CLP");
        cf2100.addChild("2110", "SVC");

        cfISA.addChild("GE", "GE");
        cfX12.addChild("IEA", "IEA");

        //System.out.println(cfX12);
        return cfX12;
}
}}}

=== Parse the X12 file ===

{{{ 
 Cf cf835 = loadCf();
 // The configuration Cf can be loaded using DI framework.
 // Check the sample spring application context file provided.

 Parser parser = new X12Parser(cf835);
    
 Double totalChargeAmount = 0.0;
 X12 x12 = (X12) parser.parse(new File("C:\\test\\835.txt"));
 List<Segment> segments = x12.findSegment("CLP");
 for (Segment s : segments) {
     totalChargeAmount = totalChargeAmount + Double.parseDouble(s.getElement(3));
 }
 System.out.println("Total Change Amount " + s.getElement(3));
  
}}}